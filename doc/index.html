<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Klarna Official PrestaShop - Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Prestaworks AB">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">
    <style type="text/css">
body {
	padding-top: 60px;
	padding-bottom: 40px;
}
</style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://www.prestaworks.se/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    </head>
    
<body data-spy="scroll" id="top">

<!-- Documentation Navbar -->

<div class="navbar navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container"> 
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> 
	<a class="brand" href="#">Klarna Official Doc</a> <!-- TIP: Change this for the name of your file -->
     	<div class="nav-collapse">
        <ul class="nav">
              <li><a href="#top" class="active">Top</a></li>
              <li><a href="#requirements">Requirements</a></li>
              <li><a href="#installation_guide">Installation guide</a></li>
              <li><a href="#other">Other</a></li>
              <li><a href="#changelog">Changelog</a></li>
          </ul>
</div>
	</div>
		</div>
			</div>		
			
<div class="container">
    
	<div class="masthead">
	    <h1>Klarna Official for PrestaShop</h1>
	    <p class="marketing-byline">Klarna Official for PrestaShop Documentation</p>
	    <p>PrestaShop Module User Guide</p>
	</div>
	
   <div id="intro">
    <p class="highlight hero-unit">Klarna has created a PrestaShop Module to fully integrate Klarna Checkout and KPM in corporate with Prestaworks AB. Klarna Checkout is a replacement of the standard checkout on most PrestaShop sites today. Having the goal to simplify buying, the Klarna Checkout experience is simple, fast and secure. Klarna simplifies buying.</p>
  </div>
      
<section id="requirements">
	<div class="page-header">
	  <h1>Requirements <small>This is what you need to set up Klarna in your PrestaShop</small></h1>
	</div>
	
    <ul>
        <li>Supported PrestaShop Version</li>
            <ul>
                <li>PS 1.6.X</li>
            </ul>
        <li>PHP Version 5.4</li>
        <li>Decimals needs to be active on the currency in the shop.</li>
    </ul>
  </section>
      

<section id="installation_guide">
    <div class="page-header">
       <h1>Installation guide <small>A step-by-step guide for installing the module in your store</small></h1>
     </div>

 <div class="alert alert-info"> <b>Heads up!</b> Klarna Official for PrestaShop can be downloaded free of charge through PrestaShop add-ons (<a href="http://addons.prestashop.com/en/payment-invoice/20393-klarna-official.html" target="_blank"><strong>URL</strong></a>). </div>

  <h3>Install the module</h3>
  <ol>
    <li>Start by navigating to the modules tab in your back-office PrestaShop.</li>
    <li>Scroll down until you find the search function for your modules, type in and search for: <strong>klarnaofficial</strong>.</li>
    <li>You will receive one hit for the search - <strong>Klarna Official by Prestaworks</strong>. At the very right, hit the button called <strong>Free</strong></li>
    <li>Now you will have information from PrestaShop add-ons where you can find a large blue button to download the integration - save it to your computer.</li>
    <li>Go back to Modules in your Back Office and hit the button called <strong>"Add a new module"</strong> at the very top right corner.</li>
    <li>A new block with the topic "Add a new module" will expand below - hit Choose a file and locate the .zip-file that you've downloaded to your computer and then click on <strong>"Upload this module"</strong>-button.</li>
    <li>The module will now be available in your system to be installed. After submission, you can scroll down and see that the button has changed name to <strong>"Install"</strong> for Klarna Official module - click the button!</li>
    <li>When module has been installed, you will be automatically redirected to the module´s configuration page.</li>
    <li><strong>Great job, module is now installed!</strong></li>
  </ol>
  <ul class="thumbnails">
    <li class="span3">
        <div class="thumb-info">
          <h5>1.</h5>
        </div>
      <div class="thumbnail"> <a href="assets/img/pw/1.jpg" target="_blank"><img src="assets/img/pw/1.jpg" alt=""></a>
      </div>
    </li>
    <li class="span3">
        <div class="thumb-info">
          <h5>2.</h5>
        </div>
      <div class="thumbnail"> <a href="assets/img/pw/2.jpg" target="_blank"><img src="assets/img/pw/2.jpg" alt=""></a>
      </div>
    </li>
    <li class="span3">
        <div class="thumb-info">
          <h5>3.</h5>
        </div>
      <div class="thumbnail"> <a href="assets/img/pw/3.jpg" target="_blank"><img src="assets/img/pw/3.jpg" alt=""></a>
      </div>
    </li>
    <li class="span3">
        <div class="thumb-info">
          <h5>4.</h5>
        </div>
      <div class="thumbnail"> <a href="assets/img/pw/4.jpg" target="_blank"><img src="assets/img/pw/4.jpg" alt=""></a>
      </div>
    </li>
  </ul> 
  
    <div class="alert alert-block"> 
        <a class="close" data-dismiss="alert">×</a>
        <h4 class="alert-heading">NOTE!</h4>
        You can also upload the .zip-file to your modules/ catalog via FTP and locate the module by searching for "klarnaofficial" in the Modules tab.
    </div>

    <h3>Configure the module</h3>
    <p>Klarna Official for PrestaShop is a <strong>giant integration</strong> with support for <strong>Klarna Checkout</strong> and <strong>Klarna KPM (invoice and partpayment)</strong>.</p>
    <p>This integration configuration page contains 5 tabs with different information and settings. These settings totally depend on what you're going to run in your store. We'll explain each tab below:</p>
    
    <table id="tabs_desc" class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Tab</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="tabs_topic">KLARNA CHECKOUT (KCO)</td>
          <td>This tab contains settings for activating Klarna Checkout, enabling Klarna Checkout for different countries, along with various settings such as design (color) management in the Checkout.</td>
        </tr>
        <tr>
          <td class="tabs_topic">KLARNA PAYMENT METHOD (KPM)</td>
          <td>This tab contains settings for enabling Klarna Payment Method and enabling Klarna Payment Method for different countries.</td>
        </tr>
        <tr>
          <td class="tabs_topic">COMMON SETTINGS</td>
          <td>This tab contains settings for various features in the integration such as testdrive, send invoice method, Klarna API-call (activate and cancel) sync order status settings, and widgets..</td>
        </tr>
        <tr>
          <td class="tabs_topic">PCLASSES</td>
          <td>This tab is only if you're running Klarna KPM and part payment. The tab will contain information about your store's assigned pclasses for part payment for your account with Klarna.</td>
        </tr>
        <tr>
          <td class="tabs_topic">TERMS AND CONDITIONS</td>
          <td>The information within this tab is mainly directed for german merchants or merchants who might start selling to Germany. The information is required in your store´s terms and conditions.</td>
        </tr>
        <tr>
          <td class="tabs_topic">SETUP</td>
          <td>The button within this tab verifies that the information provided in the integration's settings is correct and validates with Klarna.</td>
        </tr>
      </tbody>
    </table>
    
    <h3>Configure your store for Klarna Checkout</h3>
    <p>Let us run through an example of how to configure the store for Klarna Checkout only below.</p>
    
    <ol>
        <li>Start by navigating to the module configuration page, and choose the tab called <strong>KLARNA CHECKOUT (KCO)</strong></li>
        <li>In the vertical tab inside this tab, make sure to have <strong>General settings</strong> enabled.</li>
        <li>Set "Active KCO in this shop" to <strong>Yes</strong> (if you're in test-stage, you would probably run better with this option disabled)</li>
        <li>Then navigate to each country you would like to enable. This guide will assist with how to configure one country.</li>
        <li>After choosing a country in the vertical list, make sure that <strong>"Active KCO COUNTRYNAME"</strong> is set to <strong>Yes</strong> and that you've filled in your EID and Shared secret for the specific country</li>
        <li>Hit the button at the very right corner called "Save"</li>
        <li><strong>You're done, great job!</strong></li>
    </ol>
    
    <h3>Configure your store for Klarna Payment Method</h3>
    <p>Let us run through an example of how to configure the store for Klarna Payment Method only below.</p>
    
    <ol>
        <li>Start by navigating to the module configuration page, and choose the tab called <strong>KLARNA PAYMENT METHOD (KPM)</strong></li>
        <li>Then you will have to navigate to each country you would like to enable. This guide will assist with how to configure one country.</li>
        <li>Make sure to fill your EID and shared secret for the specific country</li>
        <li>Hit the button at the very right corner called "Save"</li>
        <li><strong>NOTE!</strong> Use the “Testdrive” setting under the main tab “COMMON SETTINGS” to control whether you are running in “TestDrive” or “Live” mode. This will drive if calls are being made to the Klarna test or production systems. This is the only place to control Test or Live for KPM.</li>
        <li><strong>You're done, great job!</strong></li>
    </ol>
    
    <div class="alert alert-block"> 
        <a class="close" data-dismiss="alert">×</a>
        <h4 class="alert-heading">NOTE!</h4>
        It is possible to enable both services (KCO & KPM) at the same time in the same store. Just make sure to submit your information in corresponding tab for KCO & KPM. If no information is submitted to e.g. Klarna Payment Method (KPM) tab, it will be disabled in the front-office. 
        The same goes with Klarna Checkout - that require you to set <strong>"Active KCO in this shop"</strong> to <strong>Yes</strong> while you've also make sure to submit your Klarna information to corresponding countries within the tab.
    </div>

    <h3>Configure your store to add a invoice fee for Klarna (KPM only)</h3>
    <p>To create an invoice fee for Klarna KPM (invoice) orders, you need to create a new product in the store with the following parameters:</p>
    
    <ul>
        <li>Provide a proper name, e.g: Invoice fee</li>
        <li>Make sure to assign a quiet high quantity for this article, e.g: 99999999</li>
        <li>Submit the price for the fee in the price field</li>
        <li>Make sure the product is active and visibility is set to "nowhere"</li>
        <li><strong>It's very important that this product has the same reference code as you've submitted in the Klarna Official-module under tab KLARNA PAYMENT METHOD (KPM) - field: "Invoice fee product".</strong></li>
    </ul>
    
    <h3>Configure backend calls (activate and cancel)</h3>
    <p>It is possible to work with backend calls to Klarna to activate and cancel orders. Navigate to the integration configuration page and go to tab <strong>"COMMON SETTINGS"</strong>:</p>
    <p>Only full activation and full cancelation is possible.</p>
    <table id="tabs_desc" class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Setting</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="tabs_topic">Activate order status</td>
          <td>In this drop-down you simply choose which order status you would like to trigger the call to Klarna for activating the invoice at Klarna. If you would like to disable this feature you will have to choose: <strong>"Deactivated"</strong>.</td>
        </tr>
        <tr>
          <td class="tabs_topic">Cancel reservation status</td>
          <td>In this drop-down you simply choose which order status you would like to trigger the call to Klarna for cancel the invoice at Klarna. If you would like to disable this feature you will have to choose: <strong>"Deactivated"</strong>.
          <br />In case the reservation has already been activated, a refund call is made instead.
          </td>
        </tr>
      </tbody>
    </table>
     
    <div class="alert alert-block"> 
        <a class="close" data-dismiss="alert">×</a>
        <h4 class="alert-heading">NOTE!</h4>
        This feature concerns KCO and KCO.
    </div>
    
  </section>
      
      <section id="other">
	<div class="page-header">
	  <h1>Other <small>Various information regarding the integration</small></h1>
	</div>
    <h3>IMPORTANT: Klarna for different countries (currencies and languages)</h3>
    <p>If you're going to provide Klarna services (KCO or KPM) to more than one country you have to make sure that you have created all of the corresponding currencies and languages in your store.</p>
    <p>Let's take an example: I'm setting up Klarna in my store for Sweden and Finland, My default settings in the store at the moment are aimed for Swedish customers, however, I also need to create the Euro currency and Finnish language for my Finnish customers in store administration under: <strong>Localization -> Currencies</strong> and <strong>Localization -> Languages</strong></p>
    <p>If you're enabling more than one country in Klarna integration and miss some of the currencies/languages, you will encounter issues with the checkout or when a customer tries to submit an order.</p>
  
    <h3>Template problems</h3>
    <p>This integration is developed with all the necessary standards of PrestaShop with the default template <strong>(default-bootstrap)</strong>. Some merchants encounter problems with the integration together with third party templates. Here comes a list of things you should control:</p>
    <ul>
        <li>JavaScripts - Our integration uses a JavaScript-function to replace default checkout URL's in the theme to Klarna Checkout URL if enabled. You can study the function in: <code>klarnaofficial/views/js/kco_common.js</code></li>
        <li>Font Icons - Many third party templates use different core for font icons within the template. The font icons used in our integration is mainly built together with default icons used in the bootstrap template. You will have to go through the template files (.tpl) in our integration to patch the source for icons in the integration if the icons won't appear in front-office.</li>
    </ul>
    
    <h3>Important about callbacks</h3>
    <p>The following callbacks are not implemented.</p>
    <ul>
        <li>Re-send invoice - Handled from Klarna Online.</li>
        <li>Partial refund - Handled from Klarna Online.</li>
    </ul>
    <h3>Regarding Pending orders.</h3>
    <p>If you use Klarna KPM services it is possible to get a status from Klarna for Pending Invoice or Pending Partpayment.</p>
    <p>Orders with these statuses, should not be delivered until Klarna are complete with their evaluation.</p>
    <p>It is possible to set up a cronjob for the following url, it will make a check and change status of these orders as the status is changed in Klarna.</p>
    <p><a href="../checkpendingorders.php?cron_token=" id="cron_token" target="_blank" />Click here, to open.</a></p>
    <p>If you don't set up a cronjob for this, you will need to check these orders in Klarna Online or by clicking the button on the order details page.</p>
    

  </section>
      
<section id="changelog">
  <div class="page-header">
    <h1>Changelog <small>A road-map on updates for Klarna Official - PrestaShop</small></h1>
  </div>
  <p><a href="../CHANGELOG" target="_blank">Open Changelog</a></p>

</section>

      <hr />

<footer>
    <p>&copy; Prestaworks AB 2016</p>
</footer>

</div><!-- /container --> 

<!-- Le javascript
    ================================================== --> 
<!-- Placed at the end of the document so the pages load faster --> 
<script src="assets/js/jquery.js"></script> 
<script src="assets/js/scripts.js"></script> 
<script src="assets/js/google-code-prettify/prettify.js"></script> 
<script src="assets/js/bootstrap-transition.js"></script> 
<script src="assets/js/bootstrap-alert.js"></script> 
<script src="assets/js/bootstrap-modal.js"></script> 
<script src="assets/js/bootstrap-dropdown.js"></script> 
<script src="assets/js/bootstrap-scrollspy.js"></script> 
<script src="assets/js/bootstrap-tab.js"></script> 
<script src="assets/js/bootstrap-tooltip.js"></script> 
<script src="assets/js/bootstrap-popover.js"></script> 
<script src="assets/js/bootstrap-button.js"></script> 
<script src="assets/js/bootstrap-collapse.js"></script>
<script type="text/javascript">
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    var cron_token = getParameterByName('cron_token');
    var currentLink = $("#cron_token").attr("href");
    $("#cron_token").attr("href", currentLink+cron_token);
</script>
</body>
</html>
